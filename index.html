<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dynamic Points Dictionary</title>
</head>
<body>

<svg id="mySvg" width="400" height="400" xmlns="http://www.w3.org/2000/svg">
    <!-- The initial path with n points -->
    <path id="myPath" fill="none" stroke="black" stroke-width="2"/>
    <path d="M 324.34517 49.077349 C 322.24461 49.090099 320.18442 49.825122 318.92542 51.536221 C 320.67162 57.87407 309.41366 71.50687 322.70604 53.972221 C 323.23489 53.566218 323.91271 53.363051 324.73903 53.363051 C 335.36518 56.88897 330.96279 67.56048 328.74252 71.998666 C 327.75919 73.879815 326.39177 74.82055 324.63998 74.82055 C 323.78886 74.82055 322.991 74.6377 322.24732 74.272297 C 321.49536 73.906894 320.73516 73.38596 319.96668 72.709289 C 328.19326 64.774928 316.59526 58.372063 316.59526 72.587455 C 316.59526 73.345328 316.6412 73.954374 316.73205 74.414512 C 316.82305 74.861114 316.9924 75.266996 317.2403 75.632399 C 317.47994 75.997802 317.78942 76.349807 318.16953 76.688142 C 324.18921 81.997123 329.45057 78.570901 331.41938 75.368576 C 332.06547 74.299602 332.59133 73.046532 333.00072 71.615727 L 333.00072 76.280745 C 333.02047 80.060299 336.66438 80.923143 336.68228 76.280745 C 336.68228 63.72259 345.61165 63.72259 344.62676 76.280745 C 344.64229 79.251348 346.89557 80.418312 347.86847 78.52856 C 349.02747 79.979218 351.75422 78.338939 351.17268 75.689692 L 352.03941 71.873209 L 359.42729 71.873209 L 360.29521 75.608394 C 360.4109 76.068532 360.54741 76.60316 360.7044 77.212164 C 361.54387 80.2166 363.33272 80.033862 364.03455 77.604614 C 364.94267 79.753773 367.4009 79.658334 367.38357 75.848665 C 367.38357 74.815193 365.22494 60.894497 371.5604 68.296997 C 371.98182 69.068404 372.45724 70.191761 372.98609 71.666907 L 374.46013 75.686295 C 374.80719 76.633636 375.08021 77.350888 375.27852 77.838092 C 376.26061 80.122608 377.82452 79.625854 378.50372 78.493006 C 379.24135 79.679588 380.51853 79.829327 381.18647 78.534221 C 382.34801 79.975022 385.06675 78.335516 384.48596 75.689692 L 385.35269 71.873209 L 392.74057 71.873209 L 393.60849 75.608394 C 393.72417 76.068532 393.85951 76.60316 394.0165 77.212164 C 394.78622 79.966946 396.35454 80.041098 397.1509 78.162152 C 398.0569 79.981942 400.20435 79.757284 400.20039 76.319923 C 400.20039 56.982982 399.74497 57.021911 407.10361 76.21847 C 407.30193 76.69214 407.50081 77.158971 407.69912 77.619107 C 409.31696 81.234033 412.2429 78.875236 411.96322 75.853194 L 411.96322 52.447032 C 411.9451 48.909666 408.54293 48.085306 408.57883 52.447032 L 408.57883 70.148738 L 401.50226 52.609402 C 401.30394 52.09513 401.10977 51.601137 400.91972 51.127466 C 399.0398 46.263868 395.85381 51.42333 396.75468 53.36056 L 396.75468 72.627085 C 395.05443 65.750522 393.29961 58.669273 391.67455 52.039862 C 390.69977 48.052705 386.77776 48.338874 386.33263 52.384983 C 384.8689 58.59525 383.17767 65.5002 381.6216 71.999572 L 381.6216 52.834274 C 381.60144 49.122556 377.97508 48.225787 377.9424 52.723989 C 377.72574 52.418546 377.46906 52.114899 377.16293 51.813405 C 374.89185 48.078642 360.68083 48.417795 363.70201 52.95022 L 363.70201 73.685999 C 363.68902 73.634061 363.68011 73.590883 363.66663 73.537896 C 361.89731 66.380448 360.05759 58.960055 358.36127 52.039862 C 357.38648 48.052705 353.46448 48.338874 353.01935 52.384983 C 351.55561 58.59525 349.86439 65.5002 348.30832 71.999572 L 348.30832 52.834047 C 348.288 49.090881 344.58716 48.207221 344.62676 52.834047 C 344.62676 63.593836 335.65399 63.593836 336.68228 52.834047 C 336.66195 49.089925 332.94602 48.206501 333.00072 52.834047 L 333.00072 56.228414 C 332.62584 55.104485 332.11912 53.980613 331.44414 52.855561 C 330.57196 50.582569 327.41521 49.058715 324.34517 49.077349 z M 308.44324 49.19556 C 307.3704 49.210418 306.33417 50.086027 305.96449 51.767434 C 305.39007 47.251586 289.15303 49.381907 293.3137 53.380715 L 293.3137 75.473879 C 293.25054 75.329702 293.17705 75.193672 293.09083 75.066935 C 292.77683 74.593264 292.32258 74.356312 291.72763 74.356312 L 284.26546 74.356312 L 284.26546 52.696135 C 284.24514 48.952969 280.5443 48.069309 280.5839 52.696135 L 280.5839 56.426791 C 279.0155 51.41687 275.09721 47.883158 266.08997 51.580154 C 266.05442 51.648183 266.02194 51.716171 265.98738 51.784192 C 264.24295 49.062842 252.56174 47.747882 252.16207 51.704026 C 252.16207 52.367164 252.30211 52.901792 252.58306 53.307796 C 252.87228 53.7138 253.29826 53.916739 253.86016 53.916739 L 261.88011 53.916739 L 252.5465 72.207234 C 252.42939 72.431007 252.28397 72.715507 252.13613 73.006401 L 252.13613 52.834274 C 252.11581 49.091668 248.42785 48.207867 248.45575 52.834274 L 248.45575 74.604509 C 248.20249 74.439555 247.90119 74.356312 247.5501 74.356312 L 240.08792 74.356312 L 240.08792 52.696135 C 240.0676 48.952969 236.36676 48.069309 236.40636 52.696135 L 236.40636 72.219462 C 234.7553 65.542655 233.06043 58.696997 231.48543 52.271754 C 230.51065 48.284597 226.58747 48.570766 226.14234 52.616875 C 224.55156 59.366185 222.68466 66.957969 221.02329 73.932158 C 220.83323 74.703564 220.69798 75.305764 220.61528 75.738833 C 220.53264 76.171903 220.49146 76.591479 220.49146 76.997482 C 220.53012 80.993002 225.02662 79.251528 224.29566 75.921584 L 225.16357 72.105101 L 232.55146 72.105101 L 233.41819 75.840286 C 233.53388 76.300424 233.6704 76.835052 233.82739 77.444056 C 234.72105 80.642446 236.6916 80.228451 237.28017 77.337621 C 239.64374 79.560756 246.15946 80.46665 248.71046 77.845791 C 249.45644 79.94917 251.61123 80.161641 252.05476 77.378157 C 255.21785 79.946876 266.09777 80.491099 267.09232 76.876328 C 270.31324 80.336829 276.93906 80.716442 279.24901 75.431531 C 279.79158 74.37978 280.2352 73.189218 280.5839 71.86483 L 280.5839 75.614961 C 280.60216 79.160876 290.91412 81.328841 293.39743 77.184536 C 293.94215 80.152815 297.01235 80.540233 296.99526 76.279387 C 296.99526 65.73035 310.21418 63.988186 296.99526 54.334779 L 304.24635 54.334779 C 304.83305 54.334779 305.26609 54.124991 305.54704 53.705455 C 304.02627 60.120756 302.2987 67.169069 300.74286 73.700266 C 300.55281 74.471672 300.41636 75.073872 300.33366 75.506941 C 300.251 75.940011 300.20984 76.359587 300.20984 76.76559 C 300.2485 80.76111 304.7462 79.019636 304.01522 75.689692 L 304.88314 71.873209 L 312.26984 71.873209 L 313.13775 75.608394 C 313.25343 76.068532 313.38994 76.60316 313.54695 77.212164 C 314.47861 80.546684 316.58063 79.956716 317.06695 76.725054 C 317.06695 76.061916 316.88103 74.999508 316.50918 73.537896 C 314.73986 66.380448 312.90015 58.960055 311.20382 52.039862 C 310.73165 50.108583 309.56834 49.179978 308.44324 49.19556 z M 377.94004 59.230784 L 377.94004 73.361486 C 377.76322 72.815925 377.56279 72.245294 377.33628 71.646526 C 376.87354 70.387916 376.34516 69.203834 375.75021 68.094092 C 374.28905 65.398992 376.55677 62.33837 377.94004 59.230784 z M 263.8624 59.437766 C 263.55502 62.969714 263.97738 66.520066 264.31994 70.128809 C 264.64373 71.839188 265.0957 73.340341 265.67252 74.638478 C 265.58918 74.628556 265.50257 74.622852 265.41191 74.622852 L 255.7941 74.622852 C 258.44271 69.459292 261.6309 64.438786 263.8624 59.437766 z "
    fill="lightgray" stroke="black" stroke-width="0"></path>
</svg>

<label for="numPointsInput">Enter the number of points:</label>
<input id="numPointsInput" min="1" value="begin 8">
<button onclick="generateAndAnimate()">Generate and Animate</button>
<!-- <button onclick="reducePoints()">Reduce Points</button> -->


<script>
// Function to generate random points for the path
var points0 = [[10,80],[40,10],[65,10],[95,80],[125,150],[150,150],[180,80],[210,10],[235,10],[265,80],[295,150],[320,150],[350,80]];
var points1 = [[0,80],[30,150],[60,150],[90,80],[120,10],[150,10],[180,80],[210,150],[240,150],[270,80],[300,10],[330,10],[360,80]];

function generateRandomPoints(count) {
    var points = [];
    for (var i = 0; i < count; i++) {
        points.push([Math.random() * 400, Math.random() * 400]);
    }
    points  = points0
    if (count>10) {
        points  = points1
        }
    return points;
}
speed = 4000
// Function to create the initial path with smooth curves
function createPath(points) {
    var pathString = "M" + points[0][0] + " " + points[0][1] + " ";

    for (var i = 1; i < points.length; i++) {
        var x1 = (points[i][0] + points[i - 1][0]) / 2;
        var y1 = points[i - 1][1];
        var x2 = (points[i][0] + x1) / 2;
        var y2 = points[i][1];
        pathString += "C" + x1 + " " + y1 + " " + x2 + " " + y2 + " " + points[i][0] + " " + points[i][1] + " ";
    }

    var pathElement = document.getElementById("myPath");
    pathElement.setAttribute("d", pathString);
}

// Function to smoothly transition between two sets of points
function animatePathTransition(startPoints, endPoints, duration) {
    console.log('start',startPoints)
    var startTime = null;

    function animate(currentTime) {
        if (!startTime) {
            startTime = currentTime;
        }

        var progress = (currentTime - startTime) / duration;

        if (progress < 1) {
            var currentPoints = [];
            var numPoints = Math.max(startPoints.length, endPoints.length);

            for (var i = 0; i < numPoints; i++) {
                var x = (startPoints[i] ? startPoints[i][0] : 0) + progress * ((endPoints[i] ? endPoints[i][0] : 0) - (startPoints[i] ? startPoints[i][0] : 0));
                var y = (startPoints[i] ? startPoints[i][1] : 0) + progress * ((endPoints[i] ? endPoints[i][1] : 0) - (startPoints[i] ? startPoints[i][1] : 0));
                currentPoints.push([x, y]);
            }

            createPath(currentPoints);

            requestAnimationFrame(animate);
        } else {
            // Animation completed
            createPath(endPoints);
        }
    }

    requestAnimationFrame(animate);
}


var lastinitialPoints  = []
function generateAndAnimate() {
    // Get the input value from the numPointsInput field
    var inputValue = document.getElementById("numPointsInput").value;

    // Split the input value by space
    var parts = inputValue.split(' ');

    // Extract the parts
    var actValue = parts[0];
    var numPoints = parseInt(parts[1], 10);
    speed = parseInt(parts[2], 10);


    console.log([actValue, numPoints, speed]);

    // Declare initialPoints here
    var initialPoints = generateRandomPoints(numPoints);

    function actAnimate(initialPoints, destinationPoints) {
        console.log(initialPoints, destinationPoints)
        // Animate the transition between the initial points and the destination points over 4 seconds
        animatePathTransition(initialPoints, destinationPoints, speed);
    }

    if (isNaN(numPoints) || numPoints < 1) {
        alert("Please enter a valid number of points (greater than 0).");
        return;
    }

    if (actValue === 'begin') {
        actAnimate(initialPoints, initialPoints);
        lastinitialPoints = initialPoints
    }
    if (actValue === 'animate') {
        var destinationPoints = generateRandomPoints(numPoints);
        actAnimate(lastinitialPoints, destinationPoints);
        lastinitialPoints = destinationPoints
        console.log(lastinitialPoints)
    }
}
var numPointsInput = document.getElementById("numPointsInput");

numPointsInput.addEventListener("keydown", function(event) {
    // Check if the pressed key is Enter
    if (event.key === "Enter") {
        generateAndAnimate();
    }
});
// document.getElementById('myPath').getAttribute('d')

</script>

</body>
</html>
